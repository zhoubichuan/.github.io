---
title: 'vue-cli3.0相关知识点'
copyright: true
permalink: 1
top: 0
date: 2019-05-01 10:21:32
categories:
- 前端开发
- 基础知识
- 框架
- vue
- 2.进阶
- 1.vue-cli3.0相关知识点
tags:
- vue
- vue-cli3.0
---
## 1.使用vue-cli3.0创建项目
### 1.安装vue-cli3.0脚手架
```
yarn add @vue/cli -g
```
### 2.使用vue-cli3.0创建项目
```
vue create my-demo
```
### 3.安装依赖
```
cd my-demo && yarn install
```
### 4.启动项目
```
yarn run serve
```
## 2.项目介绍
### 1.查看帮助
1.查看vue中相关的配置
```
-- help
```
2.查看webpack的相关配置，vue-cli3.0中将原先的webpack配置隐藏起来了
```
vue inspect
```
cmd中出现webpack的配置信息：
```
 /* config.module.rule('css').oneOf('vue') */
{
resourceQuery: /\?vue/,
use: [
    /* config.module.rule('css').oneOf('vue').use('vue-style-loader') */
    {
    loader: 'vue-style-loader',
    options: {
        sourceMap: false,
        shadowMode: false
    }
    },
    /* config.module.rule('css').oneOf('vue').use('css-loader') */
    {
    loader: 'css-loader',
    options: {
        sourceMap: false,
        importLoaders: 2
    }
    },
    /* config.module.rule('css').oneOf('vue').use('postcss-loader') */
    {
    loader: 'postcss-loader',
    options: {
        sourceMap: false
    }
    }
]
},
```
### 2.配置webpack
1.打包项目
```
yarn run build
```
可以看到打包后的项目中资源路径都是相对路径，当我们项目上线的时候有的资源路径是url路径，而且有时候会修改静态资源的路径

2.配置资源路径

在项目根目录下面新建vue.config.js文件,配置生成环境的资源地址，和文件路径
```
module.exports={
    publicPath:process.env.NODE_ENV==="production"?'http://www.zhufeng.cn':'/',
    assetsDir:'asserts'
}
```
3.配置输出目录
```
outputDir:'./my-dist'
```
打包后的路径为my

4.使用模板方式

vue-cli3.0中main.js中默认使用render函数渲染
```
new Vue({
  render: h => h(App),
}).$mount('#app')
```
如果要在main.js中配置使用template
```
new Vue({
  template:'<h1>hello</h1>',
}).$mount('#app')
```
则需要配置
```
runtimeCompiler:true
```
5.sourceMap

默认会打包sourceMap文件，生产需要去掉，可以配置
```
productionSourceMap:false
```
### 3.chainWebpack
控制webpack内部配置

如：配置目录别名
```
chainWebpack:config=>{
    config.resolve.alias.set('+',path.resolve(__dirname,'src'))
}
```
### 4.configuireWebpack
和merge功能一致
```
configureWebpack:{
    plugins:[],
    module:{

    }
}
```
### 5.代理请求
项目中发送请求
```
 mounted(){
    axios.get('/getUser').then(data=>{
      console.log(data)
    })
  }
```
项目中写一个服务server.js
```
let express=require('express')
let app=express()

app.get('/getUser',(req,res)=>{
    res.json({name:'zfpx'})
})
app.listen(3000)
```
出现跨域

这时需要使用webpack的代理
```
devServer:{
    proxy:{
        '/api/getUser':{
            target:'http://localhost:3000',
            pathRewrite:{
                '/api':''
            }
        }
    }
}
```
### 6.第三方插件配置
写一个公共的less文件，每个页面都需要引入，这里不用手动引入直接用插件
assets路径下新建common.less文件
```
@color:'red'
```
```
vue add style-resources-loader
```
选择less

这时会自动在vue.config.js中注入文件,加入路径
```
patterns: [
            path.resolve(__dirname,'src/assets/common.less')
        ]
```
运行项目会看到字体变红